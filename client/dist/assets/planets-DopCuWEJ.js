import{S as _,P as A,W as M,B as I,a as S,T as R,C as b,c as g,b as P,M as C,d as O,e as N,D as G,A as H}from"./three.module-DaOiP1Qo.js";import{S as X,O as v,G as D}from"./dat.gui.module-D-xaz02A.js";const L="http://api.cosmicimprint.org",Y=L+"/planet/stl/latest",r=new _,s=new A(75,window.innerWidth/window.innerHeight,.1,1e3),c=new M({antialias:!0});c.setSize(window.innerWidth,window.innerHeight);document.body.appendChild(c.domElement);window.addEventListener("resize",()=>{s.aspect=window.innerWidth/window.innerHeight,s.updateProjectionMatrix(),c.setSize(window.innerWidth,window.innerHeight),updateFloatingTextPositions()});const u=new I,F=new S({size:2.5,vertexColors:!0,sizeAttenuation:!0,map:new R().load("https://threejs.org/examples/textures/sprites/circle.png"),alphaTest:.5,transparent:!0}),h=2e5,w=new Float32Array(h*3),m=new Float32Array(h*3),$=new Float32Array(h);for(let t=0;t<h;t++){w[t*3]=(Math.random()-.5)*3e3,w[t*3+1]=(Math.random()-.5)*3e3,w[t*3+2]=(Math.random()-.5)*3e3;const e=new b(255,255,255);m[t*3]=e.r,m[t*3+1]=e.g,m[t*3+2]=e.b,$[t]=1}u.setAttribute("position",new g(w,3));u.setAttribute("color",new g(m,3));const z=new P(u,F);r.add(z);const W=new X;let o,l,x=!1,a={x:0,y:0},i={x:0,y:0};const B=20,j=-50,U=60,V=150;fetch(Y).then(t=>{if(!t.ok)throw new Error(`Failed to fetch STL file: ${t.statusText}`);return t.blob()}).then(t=>{const e=URL.createObjectURL(t);W.load(e,function(n){const p=new C({color:16777215,roughness:.5,metalness:.2});o=new O(n,p),o.rotation.x=Math.PI/2,r.add(o),l=new N(16777215,B),l.position.set(50,50,50),r.add(l);const d=new G(16777215,1);d.position.set(j,U,V),r.add(d),o.add(l),o.scale.set(20,20,20)})}).catch(t=>{console.error("Error loading STL file:",t)});document.addEventListener("mousedown",t=>{x=!0,a.x=t.clientX,a.y=t.clientY});document.addEventListener("mouseup",()=>{x=!1});document.addEventListener("mousemove",t=>{if(x&&o){const e=t.clientX-a.x,n=t.clientY-a.y;i.x=n*.01,i.y=e*.01,a.x=t.clientX,a.y=t.clientY}});const k=new H(16777215,.2);r.add(k);s.position.set(0,0,100);const f={x:0,y:0,z:0},q=5e-4,J=75e-5;function Z(){f.x=Math.sin(Date.now()*q)*5,f.y=Math.sin(Date.now()*J)*3,s.position.x=f.x,s.position.y=f.y,s.lookAt(0,0,0)}new v(s,c.domElement);const K=.005,Q=.0075;function y(){requestAnimationFrame(y),o&&(o.rotation.x+=i.x+K,o.rotation.y+=i.y+Q,i.x*=.95,i.y*=.95),Z(),c.render(r,s)}y();new D;const tt=new EventSource(L+"/notifications/");tt.onmessage=t=>{const e=JSON.parse(t.data);console.log("Push Notification:",e.message),alert(`New Notification: ${e.message}`)};async function E(t,e){try{const n=await fetch(t);if(!n.ok)throw new Error(`Failed to load ${t}: ${n.statusText}`);const d=(await n.text()).split(`
`).map(T=>T.trim()===""?"<br>":`<div>${T}</div>`).join("");document.getElementById(e).innerHTML=d}catch(n){console.error(`Error loading text file: ${n}`)}}E("./assets/left-text.txt","left-text");E("./assets/right-text.txt","right-text");
