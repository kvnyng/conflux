import{S as p,P as R,W as M,V as z,M as G,d as U,e as X,D as Y,A as B,B as ot,a as it,c as at,b as st}from"./three.module-DaOiP1Qo.js";import{S as D,O as V,G as W}from"./dat.gui.module-D-xaz02A.js";const ct="http://10.250.144.197:8000",rt=ct+"/palm/latest";fetch(rt).then(t=>{if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);return t.blob()}).then(t=>{const o=URL.createObjectURL(t),i=document.getElementById("handPrint");i.src=o,console.log("Got the image")}).catch(t=>{console.error("Error fetching the image:",t)});const w=document.getElementById("middleColumnCanvas"),H=document.getElementById("middleColumn"),dt=new D,m=new p,a=new R(75,w.clientWidth/w.clientHeight,.1,1e3),u=new M({canvas:w,alpha:!0});u.setClearColor(0,0);u.setSize(w.clientWidth,w.clientHeight);let l,x,T=100,y=.001,S=0,A=1;const b=10,lt=20,ft="http://10.250.144.197:8000",mt=ft+"/landscape/latest";let f=new z(0,0,0);fetch(mt).then(t=>{if(!t.ok)throw new Error(`Failed to fetch STL file: ${t.statusText}`);return t.blob()}).then(t=>{const o=URL.createObjectURL(t);dt.load(o,function(i){i.computeBoundingBox(),i.center();const e=i.boundingBox;f=new z((e.max.x+e.min.x)/2,(e.max.y+e.min.y)/2,(e.max.z+e.min.z)/2);const g=new G({color:16777215,roughness:.5,metalness:.2});l=new U(i,g),l.scale.set(b,b,b),m.add(l),T=Math.max(e.max.x-e.min.x,e.max.y-e.min.y,e.max.z-e.min.z)*2,x=new X(16777215,lt),x.position.set(50,50,50),m.add(x);const $=new Y(16777215,1);$.position.set(-50,60,150),m.add($),l.add(x)})}).catch(t=>{console.error("Error loading STL file:",t)});const ht=new B(16777215,.2);m.add(ht);const _=new V(a,u.domElement);_.enableDamping=!0;_.dampingFactor=.05;_.enableZoom=!1;function v(){if(requestAnimationFrame(v),l){S+=y;const t=T/A;a.position.x=f.x+t*Math.cos(S),a.position.z=f.z+t*Math.sin(S),a.position.y=f.y+t*.2,a.lookAt(f)}_.update(),u.render(m,a)}v();function wt(){const t=H.clientWidth,o=H.clientHeight;u.setSize(t,o),a.aspect=t/o,a.updateProjectionMatrix()}window.addEventListener("resize",wt);const C=new W,N={orbitRadius:T,orbitSpeed:y,zoomScale:A};C.add(N,"orbitRadius",50,200).onChange(t=>{T=t});C.add(N,"orbitSpeed",1e-4,.01).onChange(t=>{y=t});C.add(N,"zoomScale",.5,5).onChange(t=>{A=t});const ut=document.getElementById("bg"),F=new p,j=new R(75,window.innerWidth/window.innerHeight,.1,1e3),O=new M({canvas:ut});O.setPixelRatio(window.devicePixelRatio);O.setSize(window.innerWidth,window.innerHeight);j.position.setZ(1);const k=new ot,gt=new it({color:16777215}),Z=1e4,L=new Float32Array(Z*3);for(let t=0;t<Z;t++)L[t*3]=(Math.random()-.5)*2e3,L[t*3+1]=(Math.random()-.5)*2e3,L[t*3+2]=(Math.random()-.5)*2e3;k.setAttribute("position",new at(L,3));const q=new st(k,gt);F.add(q);function J(){requestAnimationFrame(J),q.rotation.y+=5e-4,O.render(F,j)}J();const xt=document.getElementById("leftColumnCanvas"),It=new D,h=new p,s=new R(75,window.innerWidth/2/window.innerHeight,.1,1e3),E=new M({canvas:xt,alpha:!0});E.setClearColor(0,0);E.setSize(window.innerWidth/2,window.innerHeight);s.position.z=5;let n,c,P=!1,r={x:0,y:0},d={x:0,y:0};const Lt=20,Tt=-50,_t=60,Et=150,St="http://10.250.144.197:8000",bt=St+"/planet/stl/latest";fetch(bt).then(t=>{if(!t.ok)throw new Error(`Failed to fetch STL file: ${t.statusText}`);return t.blob()}).then(t=>{const o=URL.createObjectURL(t);It.load(o,function(i){const e=new G({color:16777215,roughness:.5,metalness:.2});n=new U(i,e),n.rotation.x=Math.PI/2,h.add(n),c=new X(16777215,Lt),c.position.set(50,50,50),h.add(c);const g=new Y(16777215,1);g.position.set(Tt,_t,Et),h.add(g),n.add(c),n.scale.set(20,20,20)})}).catch(t=>{console.error("Error loading STL file:",t)});document.addEventListener("mousedown",t=>{P=!0,r.x=t.clientX,r.y=t.clientY});document.addEventListener("mouseup",()=>{P=!1});document.addEventListener("mousemove",t=>{if(P&&n){const o=t.clientX-r.x,i=t.clientY-r.y;d.x=i*.01,d.y=o*.01,r.x=t.clientX,r.y=t.clientY}});const pt=new B(16777215,.2);h.add(pt);s.position.set(0,0,100);const I={x:0,y:0,z:0},Rt=5e-4,Mt=75e-5;function yt(){I.x=Math.sin(Date.now()*Rt)*5,I.y=Math.sin(Date.now()*Mt)*3,s.position.x=I.x,s.position.y=I.y,s.lookAt(0,0,0)}new V(s,E.domElement);const At=.005,Ct=.0075;function K(){requestAnimationFrame(K),n&&(n.rotation.x+=d.x+At,n.rotation.y+=d.y+Ct,d.x*=.95,d.y*=.95),yt(),E.render(h,s)}K();const Nt=50,Q=20,Ot=100,tt=50,Pt=50,$t=50,Ht=50,et=new W,nt={scale:Q,lightIntensity:tt,lightX:Pt,lightY:$t,lightZ:Ht};et.add(nt,"scale",Q,Nt).onChange(t=>{n&&n.scale.set(t,t,t)});et.add(nt,"lightIntensity",tt,Ot).onChange(t=>{c&&(c.intensity=t)});
