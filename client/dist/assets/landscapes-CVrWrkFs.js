import{S as b,P as R,W as A,V as z,M as G,d as U,e as X,D as Y,A as D,B as ot,a as it,c as at,b as st}from"./three.module-DaOiP1Qo.js";import{S as B,O as V,G as W}from"./dat.gui.module-D-xaz02A.js";const ct="http://api.cosmicimprint.org",rt=ct+"/palm/latest/";fetch(rt).then(t=>{if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);return t.blob()}).then(t=>{const o=URL.createObjectURL(t),i=document.getElementById("handPrint");i.src=o,console.log("Got the image")}).catch(t=>{console.error("Error fetching the image:",t)});const dt="http://api.cosmicimprint.org",lt=dt+"/landscape/latest/",w=document.getElementById("middleColumnCanvas"),$=document.getElementById("middleColumn"),ft=new B,m=new b,a=new R(75,w.clientWidth/w.clientHeight,.1,1e3),g=new A({canvas:w,alpha:!0});g.setClearColor(0,0);g.setSize(w.clientWidth,w.clientHeight);let l,x,_=100,M=.001,p=0,y=1;const S=10,mt=20;let f=new z(0,0,0);fetch(lt).then(t=>{if(!t.ok)throw new Error(`Failed to fetch STL file: ${t.statusText}`);return t.blob()}).then(t=>{const o=URL.createObjectURL(t);ft.load(o,function(i){i.computeBoundingBox(),i.center();const e=i.boundingBox;f=new z((e.max.x+e.min.x)/2,(e.max.y+e.min.y)/2,(e.max.z+e.min.z)/2);const u=new G({color:16777215,roughness:.5,metalness:.2});l=new U(i,u),l.scale.set(S,S,S),m.add(l),_=Math.max(e.max.x-e.min.x,e.max.y-e.min.y,e.max.z-e.min.z)*2,x=new X(16777215,mt),x.position.set(50,50,50),m.add(x);const H=new Y(16777215,1);H.position.set(-50,60,150),m.add(H),l.add(x)})}).catch(t=>{console.error("Error loading STL file:",t)});const ht=new D(16777215,.2);m.add(ht);const E=new V(a,g.domElement);E.enableDamping=!0;E.dampingFactor=.05;E.enableZoom=!1;function v(){if(requestAnimationFrame(v),l){p+=M;const t=_/y;a.position.x=f.x+t*Math.cos(p),a.position.z=f.z+t*Math.sin(p),a.position.y=f.y+t*.2,a.lookAt(f)}E.update(),g.render(m,a)}v();function wt(){const t=$.clientWidth,o=$.clientHeight;g.setSize(t,o),a.aspect=t/o,a.updateProjectionMatrix()}window.addEventListener("resize",wt);const C=new W,N={orbitRadius:_,orbitSpeed:M,zoomScale:y};C.add(N,"orbitRadius",50,200).onChange(t=>{_=t});C.add(N,"orbitSpeed",1e-4,.01).onChange(t=>{M=t});C.add(N,"zoomScale",.5,5).onChange(t=>{y=t});const gt=document.getElementById("bg"),F=new b,j=new R(75,window.innerWidth/window.innerHeight,.1,1e3),P=new A({canvas:gt});P.setPixelRatio(window.devicePixelRatio);P.setSize(window.innerWidth,window.innerHeight);j.position.setZ(1);const k=new ot,ut=new it({color:16777215}),Z=1e4,L=new Float32Array(Z*3);for(let t=0;t<Z;t++)L[t*3]=(Math.random()-.5)*2e3,L[t*3+1]=(Math.random()-.5)*2e3,L[t*3+2]=(Math.random()-.5)*2e3;k.setAttribute("position",new at(L,3));const q=new st(k,ut);F.add(q);function J(){requestAnimationFrame(J),q.rotation.y+=5e-4,P.render(F,j)}J();const xt="http://api.cosmicimprint.org",It=xt+"/planet/stl/latest",Lt=document.getElementById("leftColumnCanvas"),_t=new B,h=new b,s=new R(75,window.innerWidth/2/window.innerHeight,.1,1e3),T=new A({canvas:Lt,alpha:!0});T.setClearColor(0,0);T.setSize(window.innerWidth/2,window.innerHeight);s.position.z=5;let n,c,O=!1,r={x:0,y:0},d={x:0,y:0};const Et=20,Tt=-50,pt=60,St=150;fetch(It).then(t=>{if(!t.ok)throw new Error(`Failed to fetch STL file: ${t.statusText}`);return t.blob()}).then(t=>{const o=URL.createObjectURL(t);_t.load(o,function(i){const e=new G({color:16777215,roughness:.5,metalness:.2});n=new U(i,e),n.rotation.x=Math.PI/2,h.add(n),c=new X(16777215,Et),c.position.set(50,50,50),h.add(c);const u=new Y(16777215,1);u.position.set(Tt,pt,St),h.add(u),n.add(c),n.scale.set(20,20,20)})}).catch(t=>{console.error("Error loading STL file:",t)});document.addEventListener("mousedown",t=>{O=!0,r.x=t.clientX,r.y=t.clientY});document.addEventListener("mouseup",()=>{O=!1});document.addEventListener("mousemove",t=>{if(O&&n){const o=t.clientX-r.x,i=t.clientY-r.y;d.x=i*.01,d.y=o*.01,r.x=t.clientX,r.y=t.clientY}});const bt=new D(16777215,.2);h.add(bt);s.position.set(0,0,100);const I={x:0,y:0,z:0},Rt=5e-4,At=75e-5;function Mt(){I.x=Math.sin(Date.now()*Rt)*5,I.y=Math.sin(Date.now()*At)*3,s.position.x=I.x,s.position.y=I.y,s.lookAt(0,0,0)}new V(s,T.domElement);const yt=.005,Ct=.0075;function K(){requestAnimationFrame(K),n&&(n.rotation.x+=d.x+yt,n.rotation.y+=d.y+Ct,d.x*=.95,d.y*=.95),Mt(),T.render(h,s)}K();const Nt=50,Q=20,Pt=100,tt=50,Ot=50,Ht=50,$t=50,et=new W,nt={scale:Q,lightIntensity:tt,lightX:Ot,lightY:Ht,lightZ:$t};et.add(nt,"scale",Q,Nt).onChange(t=>{n&&n.scale.set(t,t,t)});et.add(nt,"lightIntensity",tt,Pt).onChange(t=>{c&&(c.intensity=t)});
